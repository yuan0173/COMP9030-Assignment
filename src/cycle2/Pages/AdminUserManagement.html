<!DOCTYPE html>
<html>
  <head>
    <title>User Management</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/pages.css">
  </head>
  <body>
    <!-- Header will be dynamically generated by header.js -->
    <div id="header-placeholder"></div>

    <main class="container page-section">
      <h1 class="card__title" style="margin:0 0 12px">User Management</h1>
      <p class="card__desc" style="margin:0 0 16px">Search users, update roles and account status.</p>

      <!-- jia: Filter on the top -->
      <section class="card" style="padding:16px; margin-bottom:16px">
        <form id="adminUsersFilter" class="form" onsubmit="return false;" aria-label="Filter users">
          <div class="form__row">
            <div>
              <label>Keyword</label>
              <input id="adminUsersKeyword" class="input" type="text" placeholder="Search by username / email">
            </div>
            <div>
              <label>Role</label>
              <select id="adminUsersRole" class="input">
                <option value="all">All</option>
                <option value="public">Public</option>
                <option value="artist">Artist</option>
                <option value="admin">Admin</option>
              </select>
            </div>
          </div>
          <div class="form__row">
            <div>
              <label>Status</label>
              <select id="adminUsersStatus" class="input">
                <option value="all">All</option>
                <option value="active">Active</option>
                <option value="suspended">Suspended</option>
              </select>
            </div>
            <div>
              <label>Sort</label>
              <select id="adminUsersSort" class="input">
                <option value="newest">Newest</option>
                <option value="oldest">Oldest</option>
                <option value="name-asc">Username A→Z</option>
                <option value="name-desc">Username Z→A</option>
              </select>
            </div>
          </div>
          <div class="form__actions">
            <button class="btn" type="submit">Apply</button>
          </div>
        </form>
      </section>

      <!-- Notices -->
      <div id="adminUsersNotice" class="page-section" style="margin-top:0"></div>

      <!-- Userlist -->
      <section class="card" style="padding:0">
        <!-- head -->
        <div class="admin-table admin-table__header">
          <div>Username</div>
          <div>Role</div>
          <div class="hide-sm">Email</div>
          <div>Status</div>
          <div>Actions</div>
        </div>
        <div id="adminUsersBody"></div>
      </section>

      <!-- Paging -->
      <nav id="adminUsersPagination" class="pagination" style="margin-top:16px;" aria-label="Users pagination"></nav>
    </main>

    <footer class="footer page-section">
      <div class="container flex-between">
        <div>© IAA • Admin</div>
        <nav>
          <a href="./About.html">Introduction</a> ·
          <a href="./Guideline.html">Guidelines</a> ·
          <a href="./ArtsResult.html">Art Listings</a> ·
          
          <a href="./Contact.html">Contact Us</a> ·
          <a href="./Disclaimer.html">Disclaimers</a>
        </nav>
      </div>
    </footer>
    <script src="../js/session.js"></script>
    <script src="../js/admin_data.js"></script>
    <script src="../js/header.js"></script>
    <script src="../js/admin_users.js"></script>
    <script>
      // Check if user is logged in and has admin role
      if (!SessionManager.requireRole('admin')) {
        // SessionManager.requireRole will handle redirect
        return;
      }
    </script>
  </body>
</html>
