<!DOCTYPE html>
<html>
  <head>
    <title>Contact Us - Indigenous Art Atlas</title>
    <link rel="stylesheet" href="../cycle2/css/base.css">
    <link rel="stylesheet" href="../cycle2/css/layout.css">
    <link rel="stylesheet" href="../cycle2/css/components.css">
    <link rel="stylesheet" href="../cycle2/css/pages.css">
  </head>
  <body>
    <!-- Header will be dynamically generated by header.js -->
    <div id="header-placeholder"></div>

    <main class="container page-section">
      <h1>Contact Us</h1>

      <div class="grid" style="gap: 32px; align-items: start;">
        <div>
          <h2>Get in Touch</h2>
          <p>We welcome your questions, feedback, and collaboration opportunities. Please reach out to us using the form below or through our contact information.</p>

          <div style="margin: 24px 0;">
            <h3>Contact Information</h3>
            <div style="margin: 12px 0;">
              <strong>Email:</strong> contact@indigenousartatlas.org
            </div>
            <div style="margin: 12px 0;">
              <strong>Phone:</strong> +61 (0) 8 1234 5678
            </div>
            <div style="margin: 12px 0;">
              <strong>Address:</strong><br>
              Indigenous Art Atlas<br>
              Flinders University<br>
              Adelaide, SA 5001<br>
              Australia
            </div>
          </div>

          <h3>Office Hours</h3>
          <p>Monday - Friday: 9:00 AM - 5:00 PM (ACST)<br>
          Weekend: By appointment only</p>
        </div>

        <div class="card" style="padding: 24px;">
          <h2 style="margin-top: 0;">Send us a Message</h2>

          <form id="contactForm" class="form">
            <div class="form__row">
              <input id="contactName" class="input" type="text" placeholder="Your Name" required>
              <input id="contactEmail" class="input" type="email" placeholder="Your Email" required>
            </div>

            <div class="form__row">
              <select id="contactSubject" class="input" required>
                <option value="">Select Subject</option>
                <option value="general">General Inquiry</option>
                <option value="collaboration">Collaboration Opportunity</option>
                <option value="submission">Art Submission Question</option>
                <option value="technical">Technical Support</option>
                <option value="cultural">Cultural Sensitivity Concern</option>
                <option value="other">Other</option>
              </select>
            </div>

            <textarea id="contactMessage" class="input" rows="6" placeholder="Your Message" required></textarea>

            <div class="form__row">
              <label>
                <input id="contactNewsletter" type="checkbox">
                Subscribe to our newsletter for updates
              </label>
            </div>

            <div class="form__actions">
              <button type="submit" class="btn">Send Message</button>
            </div>
          </form>

          <div id="contactSuccess" class="notice notice--success" style="display: none; margin-top: 16px;">
            Thank you for your message! We'll get back to you within 2-3 business days.
          </div>
        </div>
      </div>

      <div style="margin-top: 48px;">
        <h2>Frequently Asked Questions</h2>

        <div class="faq-item" style="margin: 24px 0; padding: 16px; border-left: 4px solid var(--primary); background: var(--bg-secondary);">
          <h3>How can I submit artwork to the atlas?</h3>
          <p>You can submit artwork through our submission form. Please ensure you have proper permissions and follow our cultural sensitivity guidelines.</p>
        </div>

        <div class="faq-item" style="margin: 24px 0; padding: 16px; border-left: 4px solid var(--primary); background: var(--bg-secondary);">
          <h3>How do you handle culturally sensitive content?</h3>
          <p>We work closely with indigenous communities and cultural advisors to ensure appropriate handling of sensitive materials. Privacy controls are available for sacred or restricted content.</p>
        </div>

        <div class="faq-item" style="margin: 24px 0; padding: 16px; border-left: 4px solid var(--primary); background: var(--bg-secondary);">
          <h3>Can I use images from the atlas for research?</h3>
          <p>Usage permissions vary by artwork. Please contact us to discuss your research needs and we'll help you understand the appropriate usage guidelines.</p>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container flex-between">
        <div>© IAA</div>
        <nav>
          <a href="/cycle2/Pages/Home.html">Home</a> ·
          <a href="/cycle2/Pages/About.html">About</a> ·
          <a href="/cycle2/Pages/Guideline.html">Guidelines</a> ·
          <a href="/cycle2/Pages/ArtsResult.html">Art Listings</a> ·
          <a href="/cycle2/Pages/Disclaimer.html">Disclaimers</a>
        </nav>
      </div>
    </footer>

    <script src="../cycle2/js/session.js"></script>
    <script src="../cycle2/js/header.js"></script>
    <script>
      // Enhanced contact form functionality with backend integration
      (function(){
        const contactForm = document.getElementById('contactForm');
        const successMessage = document.getElementById('contactSuccess');

        if (contactForm) {
          contactForm.addEventListener('submit', function(e) {
            e.preventDefault();

            // Get form data
            const formData = {
              name: document.getElementById('contactName').value.trim(),
              email: document.getElementById('contactEmail').value.trim(),
              subject: document.getElementById('contactSubject').value,
              message: document.getElementById('contactMessage').value.trim(),
              newsletter: document.getElementById('contactNewsletter').checked
            };

            // Basic validation
            if (!formData.name || !formData.email || !formData.subject || !formData.message) {
              alert('Please fill in all required fields.');
              return;
            }

            // Disable form during submission
            const submitBtn = contactForm.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';

            // Submit to backend API
            fetch('/api/contact.php', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(formData)
            })
            .then(function(response) {
              if (!response.ok) {
                return response.json().then(function(data) {
                  throw new Error(data.error || 'Submission failed');
                });
              }
              return response.json();
            })
            .then(function(data) {
              // Show success message
              successMessage.style.display = 'block';
              successMessage.innerHTML = '<strong>Success!</strong> ' + data.message;

              // Reset form
              contactForm.reset();

              // Hide success message after 5 seconds
              setTimeout(function() {
                successMessage.style.display = 'none';
              }, 5000);
            })
            .catch(function(error) {
              console.error('Contact form submission error:', error);
              alert('Error: ' + error.message + '. Please try again.');
            })
            .finally(function() {
              // Re-enable form
              submitBtn.disabled = false;
              submitBtn.textContent = originalText;
            });
          });
        }
      })();
    </script>
  </body>
</html>
